{"version":3,"sources":["fileManager.js"],"names":[],"mappings":"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","file":"fileManager-compiled.js","sourcesContent":["var fs = require('fs');\r\nvar HttpResult = require('./HttpResult');\r\n\r\nexports.getItemList = function(req,res){\r\n    var httpResult = new HttpResult();\r\n    try{\r\n        fs.readFile('usersinfo.json',function(err,data){                \r\n            if(err){            \r\n                httpResult.code = -1;\r\n                httpResult.description = '数据操作失败！';                     \r\n            }else{            \r\n                var result=JSON.parse(data.toString());\r\n                httpResult.code = 1;\r\n                httpResult.data = result;           \r\n            }\r\n            res.send(httpResult);\r\n        })\r\n    }\r\n    catch(e){\r\n        httpResult.code = -2;\r\n        httpResult.description = e;  \r\n        res.send(httpResult);  \r\n    }\t\r\n}\r\n\r\nexports.addItem = function(req,res){\r\n    var httpResult = new HttpResult();\r\n    try{\r\n        fs.readFile('usersinfo.json',function(err,data){        \r\n            var result=JSON.parse(data.toString());\r\n            var Id = 1;         \r\n            if(result && result.length>0){\r\n                Id = result[result.length-1].id+1;\r\n            } \r\n            var userInfo = {id:Id,name:req.body.params.name,phone:req.body.params.phone,sex:req.body.params.sex,address:req.body.params.address,message:req.body.params.message};\r\n            result.push(userInfo);\r\n            var resultJson = JSON.stringify(result);\r\n            fs.writeFile('usersinfo.json',resultJson,function(err){\r\n                if(err){\r\n                    httpResult.code = -1;\r\n                    httpResult.description = '数据操作失败！';               \r\n                }else{\r\n                    var resultString=JSON.stringify(resultJson);\r\n                    httpResult.code = 1;\r\n                    httpResult.data = resultString;                \r\n                }\r\n                res.send(httpResult); \r\n            })\r\n        })\r\n    }\r\n\tcatch(e){\r\n        httpResult.code = -2;\r\n        httpResult.description = e;  \r\n        res.send(httpResult); \r\n    }\r\n}\r\n\r\nexports.setPagination = function(req,res){\r\n    var httpResult = new HttpResult();\r\n    try{\r\n        fs.readFile('usersinfo.json',function(err,data){        \r\n            if(err){            \r\n                httpResult.code = -1;\r\n                httpResult.description = '数据操作失败！';                 \r\n            }else{   \r\n                var pageindex = req.params.pageindex;\r\n                var pagesize = req.params.pagesize;         \r\n                var result=JSON.parse(data.toString());            \r\n                var startIndex = (pageindex-1)*pagesize;\r\n                var endIndex = pageindex*pagesize;\r\n                if(endIndex>result.length){\r\n                    endIndex = result.length;\r\n                }\r\n                var curResult = result.slice(startIndex,endIndex)\r\n                httpResult.code = 1;\r\n                httpResult.data = {itemList:curResult,allCount:result.length};       \r\n            }\r\n            res.send(httpResult);\r\n        })\r\n    }\r\n    catch(e){\r\n        httpResult.code = -2;\r\n        httpResult.description = e;\r\n        res.send(httpResult);\r\n    }\r\n\t\r\n}"]}